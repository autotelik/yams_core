<%= form_with model: @track.model, url: polymorphic_path([yams_core, @track.model]) , local: true do |f| %>

  <div class="row">
    <div class="col-6 offset-1">
      <span class="anchor" id="formLogin"></span>

      <div class="card card-outline-secondary">

        <%= bootstrap_card_header( t("tracks.#{params[:action]}.form.card-header") ) %>

        <div class="card-body">

          <%= render 'yams_core/shared/errors', model: @track %>

          <div class="form-group">
            <%= f.label t(:title, scope: :tracks) %>
            <%= f.text_field :title, :autofocus => true, class: 'form-control' %>
          </div>

          <div class="form-group">
            <%= f.label t(:description, scope: :tracks) %>
            <%= f.text_field :description, :autofocus => true, class: 'form-control' %>
          </div>

          <%= render partial: 'yams_core/shared/edit_tag_list', locals: { form: f, model: @track.model } %>

          <div class="form-group">
            <% if @track.audio.try(:filename) %>
              <p>Replace : <%= @track.audio.filename %></p>
            <% end %>
            <%= custom_file_field(f, :audio, t('.choose_audio_file'), additional: t('.accept_audio_file')) %>
          </div>

          <%= render partial: 'yams_core/shared/choose_cover', locals: { form: f, model: @track } %>

          <%= bootstrap_submit(form: f, text: t('.submit')) %>

        </div>
      </div>
    </div>

    <!-- Side bar -->
    <div class="col-4">

      <div class="row">
        <div class="col-12">
          <%= render partial: 'permissions', locals: { form: f } %>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <div class="card card-outline-secondary">

            <%= bootstrap_card_header( t(:albums, scope: :global)) %>

            <div class="card-body">
              <div class="row">
                <div class="col-12">
                  <%= render partial: 'yams_core/shared/album_selection' %>
                </div>
              </div>

              <hr class="m-3 pb-0">

              <h5><%= t('.track_albums_list') %></h5> <ul>
              <% track.albums.each do |a|  %>
                <li class="form-group">
                  <%= link_to(a.title, yams_core.edit_album_path(a)) %>
                </li>
              <% end %>
              <li class="form-group" id="target-for-add-track-album-selection"></li>
            </ul>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div>

<% end %>
